<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<!-- $Id$ -->
<beans>
	
	<bean id="application" 
		class="org.springframework.richclient.application.Application">
		<constructor-arg index="0">
			<ref bean="applicationDescriptor"/>
		</constructor-arg>
		<constructor-arg index="1">
			<ref bean="petclinicLifecycleAdvisor"/>
		</constructor-arg>
	</bean>
	
	<bean id="petclinicLifecycleAdvisor" 
		class="org.springframework.richclient.samples.petclinic.PetClinicLifecycleAdvisor">
		<property name="windowCommandBarDefinitions">
			<value>org/springframework/richclient/samples/petclinic/ui/commands-context.xml</value>
		</property>
		<property name="startingPageId">
			<value>ownerManagerView</value>
		</property>
	</bean>
	
	<bean id="applicationDescriptor" 
		class="org.springframework.richclient.application.support.DefaultApplicationDescriptor">
		<property name="version">
			<value>1.0</value>
		</property>
		<property name="buildId">
			<value>20041025001</value>
		</property>
	</bean>
	
    <!-- 
        Bean: serviceLocator
        Usage: Platform required
        Description: This defines the singleton application service locator instance.
            This is a trivial singleton object providing access to the configured
            services, as specified on the applicationServices property.
    -->
    <bean id="serviceLocator" class="org.springframework.richclient.application.ApplicationServicesLocator">
        <property name="applicationServices" ref="applicationServices"/>
    </bean>

    <!-- 
        Bean: applicationServices
        Usage: Platform required (unless you set this up programmatically)
        Description: This configures the application services available to the platform.
            There are specific setter methods for all the standard services, see the
            javadoc on the DefaultApplicationServices class for more details.
            NOTE: The use of bean ids (idref) is preferred over using direct bean
            references to avoid startup problems with circular references.
    -->
    <bean id="applicationServices"
        class="org.springframework.richclient.application.support.DefaultApplicationServices">
        <property name="applicationObjectConfigurerId"><idref bean="applicationObjectConfigurer" /></property>
        <property name="binderSelectionStrategyId"><idref bean="binderSelectionStrategy"/></property>
        <property name="formComponentInterceptorFactoryId"><idref bean="formComponentInterceptorFactory"/></property>
        <property name="imageSourceId"><idref bean="imageSource"/></property>
        <property name="rulesSourceId"><idref bean="rulesSource"/></property>
    </bean>

	<bean id="applicationObjectConfigurer" depends-on="serviceLocator"
		class="org.springframework.richclient.application.config.DefaultApplicationObjectConfigurer">
	</bean>
		
	<bean id="applicationEventMulticaster" 
		class="org.springframework.context.event.SimpleApplicationEventMulticaster"/>
		
    <bean id="binderSelectionStrategy" 
        class="org.springframework.richclient.form.binding.swing.SwingBinderSelectionStrategy">
        <property name="bindersForPropertyTypes">
            <map>
                <!--
                <entry>
                    <key>
                        <value type="java.lang.Class">java.util.Date</value>
                    </key>
                    <bean 
                        class="org.springframework.richclient.samples.petclinic.ui.binder.CustomDatePickerBinder"/>
                </entry>
                -->
                <entry>
                    <key>
                        <value type="java.lang.Class">java.util.Date</value>
                    </key>
                    <bean
                        class="org.springframework.richclient.form.binding.swing.NachoCalendarDateFieldBinder"/>
                </entry>
                <entry>
                    <key>
                        <value type="java.lang.Class"> 
                            org.springframework.samples.petclinic.PetType</value>
                    </key>
                    <bean 
                        class="org.springframework.richclient.samples.petclinic.ui.binder.PetTypeBinder">
                        <property name="clinic">
                            <ref bean="clinic"/>
                        </property>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
	
	<bean id="lookAndFeelConfigurer" 
		class="org.springframework.richclient.application.config.JGoodiesLooksConfigurer">
		<property name="popupDropShadowEnabled" value="false" />
		<property name="theme">	
			<bean class="com.jgoodies.looks.plastic.theme.ExperienceBlue"/>
		</property>
	</bean>
	
	<bean id="messageSource" 
		class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basenames">
			<list>
				<value>org.springframework.richclient.samples.petclinic.ui.messages</value>
				<value>org.springframework.richclient.application.messages</value>
			</list>
		</property>
	</bean>
	
	<bean id="imageResourcesFactory" 
		class="org.springframework.context.support.ResourceMapFactoryBean">
		<property name="locations">
			<list>
				<value>classpath:org/springframework/richclient/image/images.properties</value>
				<value>classpath:org/springframework/richclient/samples/petclinic/ui/images.properties</value>
			</list>
		</property>
		<property name="resourceBasePath">
			<value>images/</value>
		</property>
	</bean>
	
	<bean id="imageSource" 
		class="org.springframework.richclient.image.DefaultImageSource">
		<constructor-arg index="0">
			<ref bean="imageResourcesFactory"/>
		</constructor-arg>
		<property name="brokenImageIndicator">
			<value>images/alert/error_obj.gif</value>
		</property>
	</bean>
	
	<bean id="formComponentInterceptorFactory" 
		class="org.springframework.richclient.form.builder.support.ChainedInterceptorFactory">
		<property name="interceptorFactories">
			<list>
				<bean class="org.springframework.richclient.form.builder.support.ColorValidationInterceptorFactory">
					<property name="errorColor">
						<value>255,245,245</value>
					</property>
				</bean>
				<bean class="org.springframework.richclient.form.builder.support.OverlayValidationInterceptorFactory"/>
				<bean class="org.springframework.richclient.text.TextComponentPopupInterceptorFactory"/>
				<bean class="org.springframework.richclient.list.ComboBoxAutoCompletionInterceptorFactory"/>
			</list>
		</property>
	</bean>

	<bean id="rulesSource" 
		class="org.springframework.richclient.samples.petclinic.domain.PetClinicValidationRulesSource"/>
        
	<bean id="ownerManagerView"
		class="org.springframework.richclient.application.support.DefaultViewDescriptor">
		<property name="viewClass">
			<value>org.springframework.richclient.samples.petclinic.ui.OwnerManagerView</value>
		</property>
		<property name="viewProperties">
			<map>
				<entry key="clinic">
					<ref bean="clinic"/>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="newOwnerWizard" 
		class="org.springframework.richclient.samples.petclinic.ui.NewOwnerWizard">
		<property name="clinic">
			<ref bean="clinic"/>
		</property>
	</bean>
	
	<bean id="vetManagerView" 
		class="org.springframework.richclient.application.support.DefaultViewDescriptor">
		<property name="viewClass">
			<value>org.springframework.richclient.samples.petclinic.ui.VetManagerView</value>
		</property>
		<property name="viewProperties">
			<map>
				<entry key="clinic">
					<ref bean="clinic"/>
				</entry>
			</map>
		</property>
	</bean>

    <bean id="exceptionHandlingView"
        class="org.springframework.richclient.application.support.DefaultViewDescriptor">
        <property name="viewClass">
            <value>org.springframework.richclient.samples.petclinic.exceptionhandling.ExceptionHandlingView</value>
        </property>
        <!--<property name="viewProperties">-->
            <!--<map>-->
                <!--<entry key="ggg" value-ref="ggg"/>-->
            <!--</map>-->
        <!--</property>-->
    </bean>
	
	<bean id="setupWizard" 
		class="org.springframework.richclient.application.setup.SetupWizard">
		<property name="licenseTextLocation">
			<value>/org/springframework/richclient/samples/petclinic/license.html</value>
		</property>
	</bean>
</beans>
